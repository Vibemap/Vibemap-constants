"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Axios=require("axios");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Axios__default=_interopDefaultLegacy(Axios);const API_ROOT="https://staging.vibemap.xyz/api",axiosInstance=Axios__default.default.create({timeout:15e3,headers:{"Content-Type":"application/json"}}),setRefreshToken=(axiosInstance.interceptors.response.use(e=>(console.log("Response is:",e),e),e=>{console.log("Status: ",e.response.status,"Error is: ",e);const o=e.config;return 401===e.response.status?(o._retry=!0,exports.refreshToken(o)):Promise.reject(e)}),e=>{exports.refreshToken=e}),register=async(e,o=API_ROOT)=>{o={method:"post",url:o+"/auth/register",headers:{"Content-Type":"application/json"},data:e};console.log("Register with: ",e,o),axiosInstance(o).then(function(e){return console.log(JSON.stringify(e.data)),axiosInstance.defaults.headers.Authorization="Bearer "+e.data.accessToken,e}).catch(function(e){console.log("Problem with request: ",e)})},logIn=async(e,o=API_ROOT)=>{o={method:"post",url:o+"/auth/login",data:JSON.stringify(e)};axiosInstance(o).then(function(e){return console.log(JSON.stringify(e.data)),axiosInstance.defaults.headers.Authorization="Bearer "+e.data.accessToken,{response:e,error:void 0}}).catch(function(e){return console.log("Problem with request: ",e),{response:void 0,error:e}})},resetPassword=async(e,o=API_ROOT)=>{o={method:"post",url:o+(o===API_ROOT?"/auth/password-reset":"/auth/reset-password"),data:JSON.stringify(e)};axiosInstance(o).then(function(e){return console.log(JSON.stringify(e.data)),{response:e,error:void 0}}).catch(function(e){return console.log("Problem with request: ",e),{response:void 0,error:e}})},changePassword=async(e,o,t=API_ROOT)=>{t={method:"post",url:t+"/auth/change-password",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},data:JSON.stringify(e)};axiosInstance(t).then(function(e){return console.log(JSON.stringify(e.data)),{response:e,error:void 0}}).catch(function(e){return console.log("Problem with request: ",e),{response:void 0,error:e}})},logOut=async(e,o=API_ROOT)=>{o={method:"post",url:o+"/auth/logout",data:JSON.stringify(e)};axiosInstance(o).then(function(e){return console.log(JSON.stringify(e.data)),{response:e,error:void 0}}).catch(function(e){return console.log("Problem with request: ",e),{response:void 0,error:e}})},oauthLogin=(exports.refreshToken=async(o,e={refreshToken:exports.refreshToken},t=API_ROOT)=>{t={method:"post",url:t+"/auth/logout",data:JSON.stringify(e)};axiosInstance(t).then(function(e){return console.log(JSON.stringify(e.data)),axiosInstance.defaults.headers.Authorization="Bearer "+e.data.accessToken,o.headers.Authorization="Bearer "+e.data.accessToken,axiosInstance(o)}).catch(function(e){return console.log("Problem with request: ",e),{response:void 0,error:e}})},async({provider:e,token:o,googleClientID:t,appleName:s,appleLastName:r},n=API_ROOT)=>{n={method:"post",url:n+"/auth/oauth",data:JSON.stringify({provider:e,token:o,googleClientID:t,appleName:s,appleLastName:r})};return axiosInstance(n)});exports.changePassword=changePassword,exports.logIn=logIn,exports.logOut=logOut,exports.oauthLogin=oauthLogin,exports.register=register,exports.resetPassword=resetPassword,exports.setRefreshToken=setRefreshToken;
